# 📋 部署到公网 - 快速检查清单

## ✅ 部署前准备

### 1. 代码检查

- [ ] 代码已保存所有更改
- [ ] `package.json` 配置正确
- [ ] `.gitignore` 包含 `.env` 文件
- [ ] 所有文件都在项目目录中

### 2. Git 仓库

- [ ] 已注册 GitHub 账号
- [ ] 已创建新仓库（或使用现有仓库）
- [ ] 记录了仓库地址

### 3. API 密钥

- [ ] 已获取智谱AI API 密钥
- [ ] 密钥格式正确（sk.xxxxxxxxxxxxx）
- [ ] 密钥有效且有额度

### 4. 部署平台账号

- [ ] Render 账号已注册（推荐）
- [ ] 或 Vercel 账号已注册
- [ ] 或 Railway 账号已注册

---

## 🚀 快速部署步骤（Render - 最简单）

### 第1步：推送到 GitHub

```bash
# 进入项目目录
cd D:\opencode

# 初始化 Git（如果还没有）
git init
git add .
git commit -m "Women's Day Video Generator"

# 连接到 GitHub（替换你的信息）
git remote add origin https://github.com/你的用户名/你的仓库名.git

# 推送代码
git branch -M main
git push -u origin main
```

### 第2步：在 Render 部署

1. 访问：https://render.com/
2. 登录你的账号
3. 点击 "New +" → "Web Service"
4. 连接你的 GitHub 仓库
5. 配置：
   - **Name**: `womens-day-video`
   - **Runtime**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `node server.js`
   - **Instance Type**: `Free`
6. 添加环境变量：
   - `ZHIPU_API_KEY` = `你的智谱AI API密钥`
7. 点击 "Deploy Web Service"

### 第3步：等待部署完成

- 部署需要 2-3 分钟
- 看到 "Deploy succeeded" 表示成功

### 第4步：获取公网地址

在 Render 项目页面会显示：
```
Live App: https://womens-day-video.onrender.com
```

### 第5步：分享给同事

复制公网地址，发送给同事即可访问！

---

## 🔧 常见部署问题

### 问题1：GitHub 推送失败

**原因：** 可能是权限问题或仓库不存在

**解决：**
1. 确认 GitHub 仓库已创建
2. 检查仓库地址是否正确
3. 确认你有推送权限

### 问题2：Render 无法连接 GitHub

**原因：** GitHub 未授权

**解决：**
1. 点击 "Configure account"
2. 授权 Render 访问你的 GitHub
3. 选择要访问的仓库

### 问题3：构建失败

**原因：** `package.json` 配置问题

**解决：**
1. 确认 `package.json` 格式正确
2. 确认依赖版本正确
3. 查看 Build Log 了解具体错误

### 问题4：部署成功但无法访问

**原因：** 环境变量未配置

**解决：**
1. 确认添加了 `ZHIPU_API_KEY`
2. 确认 API 密钥正确
3. 重新部署

### 问题5：视频生成失败

**原因：** API 密钥问题或额度不足

**解决：**
1. 检查环境变量中的 API 密钥
2. 确认 API 密钥有足够额度
3. 查看 Render 日志了解错误信息

---

## 📱 测试部署

### 访问测试

打开公网地址，检查：

- [ ] 页面可以正常加载
- [ ] UI 显示正常
- [ ] 可以上传照片
- [ ] 可以选择风格
- [ ] 可以生成视频
- [ ] 视频可以播放
- [ ] 视频可以下载

### 功能测试

1. **上传功能**
   - [ ] 点击上传区域可以打开文件选择
   - [ ] 拖拽上传功能正常
   - [ ] 图片预览正常显示

2. **风格选择**
   - [ ] 所有风格卡片正常显示
   - [ ] 点击可以选择风格
   - [ ] 选中状态正确显示

3. **视频生成**
   - [ ] 点击生成按钮无错误
   - [ ] 等待时间正常（2-5分钟）
   - [ ] 视频生成成功显示

4. **下载分享**
   - [ ] 下载按钮正常工作
   - [ ] 视频可以正常播放
   - [ ] 分享功能正常（如果使用）

---

## 🎯 部署成功后的后续工作

### 1. 通知同事

**企业微信：**
```
🌸 妇女节特别企划！

大家好，科技社为大家准备了妇女节照片生成视频工具！

📱 访问地址：https://womens-day-video.onrender.com

✨ 功能：
- 上传照片即可生成视频
- 三种精美风格可选
- AI 智能生成，2-5分钟完成

🎬 使用方法：
1. 打开链接
2. 上传照片
3. 选择风格
4. 等待生成
5. 下载分享

祝大家妇女节快乐！
```

**邮件通知：**
```
主题：【妇女节活动】照片生成视频工具已上线

各位同事：

科技社为大家准备了妇女节特别活动！

工具地址：https://womens-day-video.onrender.com

使用说明：
1. 上传一张清晰的个人照片
2. 选择喜欢的风格（浪漫花瓣/星光璀璨/魔法闪光）
3. 等待2-5分钟，AI自动生成视频
4. 下载并分享给你的朋友

注意事项：
- 建议使用清晰的正面照片
- 视频生成需要2-5分钟，请耐心等待
- 生成的视频可以自由下载分享

祝大家妇女节快乐！

科技社
```

### 2. 收集反馈

创建反馈渠道：
- 企业微信群反馈
- 问卷调查
- 直接沟通

### 3. 监控使用

在 Render 控制台：
- 查看访问日志
- 监控 API 调用
- 统计生成次数
- 关注错误信息

### 4. 优化改进

根据反馈：
- 调整风格提示词
- 优化用户界面
- 提升生成速度
- 增加新功能

---

## 💰 成本监控

### Render 免费额度

- ✅ 750 小时/月（足够 24/7 运行）
- ✅ 0.1 CPU
- ✅ 512MB RAM
- ✅ 10GB 存储

**成本：$0/月**

### API 使用量

智谱 AI API 按使用量计费：
- 查看智谱控制台的使用统计
- 关注余额和额度
- 根据需要充值

---

## 🔒 安全建议

### 1. 保护 API 密钥

- ✅ 已将 `.env` 加入 `.gitignore`
- ✅ 在部署平台的环境变量中配置
- ✅ 不在任何地方公开 API 密钥

### 2. 限制访问（可选）

如果需要限制访问：
- 使用平台提供的访问限制功能
- 添加密码保护
- 使用公司域名限制

### 3. 定期检查

- 定期查看日志
- 监控异常访问
- 检查 API 使用量
- 更新依赖版本

---

## 📞 技术支持

### 获取帮助

1. **查看日志**
   - Render: 控制台 Logs 标签
   - Vercel: 项目 Logs 页面

2. **查看文档**
   - 项目 README.md
   - 部署指南 DEPLOY-PUBLIC.md
   - 智谱 AI 文档

3. **联系支持**
   - Render 支持：support@render.com
   - 智谱 AI 支持：https://open.bigmodel.cn/

---

## 🎉 部署成功！

如果所有步骤都完成，恭喜你！

**公网地址：** `https://womens-day-video.onrender.com`

**现在可以：**
- ✅ 分享给公司同事
- ✅ 让大家都来体验
- ✅ 收集用户反馈
- ✅ 持续优化改进

---

**开始部署吧！3分钟后就能分享给同事了！** 🚀